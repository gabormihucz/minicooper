image: blang/latex
build:
  before_script:
    - virtualenv -p python3 venv
    - . venv/bin/activate
    - python -V
    - sudo apt-get update
    - sudo apt install poppler-utils
  script:
    - pip install -r dependencies.txt
    - python MCapp/tests.py
    - python3 MCweb/MCwebDjango/webtests.py
    - latexmk -pdf -cd docs/dissertation/dissertation.tex
  artifacts:
    paths:
      - "*.pdf"
