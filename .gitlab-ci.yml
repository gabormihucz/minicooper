image: blang/latex
build:
  before_script:
    - virtualenv -p python3 venv
    - . venv/bin/activate
    - python -V
    - sudo apt-get update
  script:
    - pip install -r dependencies.txt
    - pip list
    - python MCapp/tests.py
    - python3 MCweb/MCwebDjango/manage.py test
    - latexmk -pdf -cd docs/dissertation/dissertation.tex
  artifacts:
    paths:
      - "*.pdf"
